<?xml version="1.0"?>
<ruleset xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="PHPCompatibilitySymfonyPolyfillPHP82" xsi:noNamespaceSchemaLocation="https://schema.phpcodesniffer.com/phpcs.xsd">

    <description>PHPCompatibility ruleset for PHP_CodeSniffer which accounts for polyfills provided by the Symfony PHP 8.2 library.</description>

    <rule ref="PHPCompatibility">
        <!-- https://github.com/symfony/polyfill-php82/blob/master/bootstrap.php -->
        <exclude name="PHPCompatibility.FunctionUse.NewFunctions.odbc_connection_string_is_quotedFound"/>
        <exclude name="PHPCompatibility.FunctionUse.NewFunctions.odbc_connection_string_should_quoteFound"/>
        <exclude name="PHPCompatibility.FunctionUse.NewFunctions.odbc_connection_string_quoteFound"/>
        <exclude name="PHPCompatibility.FunctionUse.NewFunctions.ini_parse_quantityFound"/>

        <!-- https://github.com/symfony/polyfill-php82/tree/main/Resources/stubs -->
        <!--
        Detection for the AllowDynamicProperties and SensitiveParameter attributes is incomplete in PHPCompatibility 10.0.0-alpha1.
        This section should be filled out once the detection implementation is known.
        -->

        <!-- https://github.com/symfony/polyfill-php82/tree/main/Resources/stubs/Random -->
        <exclude name="PHPCompatibility.Classes.NewClasses.random_brokenrandomengineerrorFound"/>
        <exclude name="PHPCompatibility.Classes.NewClasses.random_randomerrorFound"/>
        <exclude name="PHPCompatibility.Classes.NewClasses.random_randomexceptionFound"/>
        <exclude name="PHPCompatibility.Classes.NewClasses.random_engine_secureFound"/>
        <exclude name="PHPCompatibility.Interfaces.NewInterfaces.random_cryptosafeengineFound"/>
        <exclude name="PHPCompatibility.Interfaces.NewInterfaces.random_engineFound"/>
    </rule>

    <!-- Prevent false positives being thrown when run over the code of polyfill-php82 itself. -->
    <rule ref="PHPCompatibility.Attributes.NewAttributes.PHPNativeAttributeFound">
        <exclude-pattern>/polyfill-php82/Resources/stubs/AllowDynamicProperties\.php$</exclude-pattern>
        <exclude-pattern>/polyfill-php82/Resources/stubs/SensitiveParameter\.php$</exclude-pattern>
    </rule>
    <rule ref="PHPCompatibility.Classes.NewClasses.attributeFound">
        <exclude-pattern>/polyfill-php82/Resources/stubs/AllowDynamicProperties\.php$</exclude-pattern>
        <exclude-pattern>/polyfill-php82/Resources/stubs/SensitiveParameter\.php$</exclude-pattern>
    </rule>
    <rule ref="PHPCompatibility.Namespaces.ReservedNames.randomFound">
        <exclude-pattern>/polyfill-php82/Resources/stubs/Random/*\.php$</exclude-pattern>
    </rule>

</ruleset>
